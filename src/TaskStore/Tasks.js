import { create } from "zustand";

export const useTasksStore = create((set) => ({
  tasksState: {
    taskIndex: null,
    tasks: [
      {
        createdAt: "2024-05-01T17:03:16.761Z",
        projectName: "ima jihan",
        description:
          "this project time will be 2 month . per task all member will one. day ",
        task: [
          {
            taskName: "Make Home Page  ",
            taskDescription: "this task will be 1 month",
            deadline:[],
            assigned_user:"jihanstk",
            status:"To Do"
          },
        ],
        projectDuration: [
          "2024-04-30T18:00:00.000Z",
          "2024-06-21T18:00:00.000Z",
        ],
        status: "Done",
        photo: "https://loremflickr.com/640/480/technics",
        id: 1,
        members: "jihanstk@gmail.com",
      },
      {
        createdAt: "2024-05-01T17:03:16.761Z",
        projectName: "ima jihan",
        description:
          "this project time will be 2 month . per task all member will one. day ",
        task: [
          {
            taskName: "Make Home Page  ",
            taskDescription: "this task will be 1 month",
            deadline:[],
            assigned_user:"jihanstk",
            status:"To Do"
          },
        ],
        projectDuration: [
          "2024-04-30T18:00:00.000Z",
          "2024-06-21T18:00:00.000Z",
        ],
        status: "Done",
        photo: "https://loremflickr.com/640/480/technics",
        id: 2,
        members: "jihanstk@gmail.com",
      },
      {
        createdAt: "2024-05-01T17:03:16.761Z",
        projectName: "ima jihan",
        description:
          "this project time will be 2 month . per task all member will one. day ",
        task: [
          {
            taskName: "Make Home Page  ",
            taskDescription: "this task will be 1 month",
            deadline:[],
            assigned_user:"jihanstk",
            status:"To Do"
          },
        ],
        projectDuration: [
          "2024-04-30T18:00:00.000Z",
          "2024-06-21T18:00:00.000Z",
        ],
        status: "Done",
        photo: "https://loremflickr.com/640/480/technics",
        id: 3,
        members: "jihanstk@gmail.com",
      },
      {
        createdAt: "2024-05-01T17:03:16.761Z",
        projectName: "Create a Website",
        description:
          "this project time will be 2 month . per task all member will one. day",
        task: [
          {
            taskName: "Make Home Page  ",
            taskDescription: "this task will be 1 month",
            deadline:[],
            assigned_user:"jihanstk",
            status:"To Do"
          },
        ],
        projectDuration: [
          "2024-04-30T18:00:00.000Z",
          "2024-06-28T18:00:00.000Z",
        ],
        status: "In Progress",
        photo: "https://loremflickr.com/640/480/technics",
        id: 4,
        members: "jihanstk@gmail.com",
      },
      {
        createdAt: "2024-05-01T17:03:16.761Z",
        projectName: "Create a Website",
        description:
          "this project time will be 2 month . per task all member will one. day",
        task: [
          {
            taskName: "Make Home Page  ",
            taskDescription: "this task will be 1 month",
            deadline:[],
            assigned_user:"jihanstk",
            status:"To Do"
          },
        ],
        projectDuration: [
          "2024-04-30T18:00:00.000Z",
          "2024-06-28T18:00:00.000Z",
        ],
        status: "In Progress",
        photo: "https://loremflickr.com/640/480/technics",
        id: 5,
        members: "jihanstk@gmail.com",
      },
      {
        createdAt: "2024-05-01T17:03:16.761Z",
        projectName: "Create a Website",
        description:
          "this project time will be 2 month . per task all member will one. day",
        task: [
          {
            taskName: "Make Home Page  ",
            taskDescription: "this task will be 1 month",
            deadline:[],
            assigned_user:"jihanstk",
            status:"To Do"
          },
        ],
        projectDuration: [
          "2024-04-30T18:00:00.000Z",
          "2024-06-28T18:00:00.000Z",
        ],
        status: "In Progress",
        photo: "https://loremflickr.com/640/480/technics",
        id: 6,
        members: "jihanstk@gmail.com",
      },
      {
        createdAt: "2024-05-01T17:03:16.761Z",
        projectName: "Create a Website",
        description:
          "this project time will be 2 month . per task all member will one. day",
        task: [
          {
            taskName: "Make Home Page  ",
            taskDescription: "this task will be 1 month",
            deadline:[],
            assigned_user:"jihanstk",
            status:"To Do"
          },
        ],
        projectDuration: [
          "2024-04-30T18:00:00.000Z",
          "2024-06-28T18:00:00.000Z",
        ],
        status: "To Do",
        photo: "https://loremflickr.com/640/480/technics",
        id: 7,
        members: "jihanstk@gmail.com",
      },
      {
        createdAt: "2024-05-01T17:03:16.761Z",
        projectName: "Create a Website",
        description:
          "this project time will be 2 month . per task all member will one. day",
        task: [
          {
            taskName: "Make Home Page  ",
            taskDescription: "this task will be 1 month",
            deadline:[],
            assigned_user:"jihanstk",
            status:"To Do"
          },
        ],
        projectDuration: [
          "2024-04-30T18:00:00.000Z",
          "2024-06-28T18:00:00.000Z",
        ],
        status: "To Do",
        photo: "https://loremflickr.com/640/480/technics",
        id: 8,
        members: "jihanstk@gmail.com",
      },
      {
        createdAt: "2024-05-01T17:03:16.761Z",
        projectName: "Create a Website",
        description:
          "this project time will be 2 month . per task all member will one. day",
        task: [
          {
            taskName: "Make Home Page  ",
            taskDescription: "this task will be 1 month",
            deadline:[],
            assigned_user:"jihanstk",
            status:"To Do"
          },
        ],
        projectDuration: [
          "2024-04-30T18:00:00.000Z",
          "2024-06-28T18:00:00.000Z",
        ],
        status: "To Do",
        photo: "https://loremflickr.com/640/480/technics",
        id: 9,
        members: "jihanstk@gmail.com",
      },
    ],
  },

  addTask: (task) =>
    set((state) => ({
      tasksState: {
        ...state.tasksState,
        tasks: [...state.tasksState.tasks, task],
      },
    })),

  editTasks: (updateTask, taskID) =>
    set((state) => ({
      tasksState: {
        ...state.tasksState,
        tasks: state.tasksState.tasks.map((task) =>
          task.id === taskID ? { ...task, ...updateTask } : task
        ),
      },
    })),

  removeTasks: (taskID) =>
    set((state) => ({
      tasksState: {
        ...state.tasksState,
        tasks: state.tasksState.tasks.filter((task) => task.id !== taskID),
      },
    })),

    assignTask: (taskID, newTask) =>
    set((state) => ({
      tasksState: {
        ...state.tasksState,
        tasks: state.tasksState.tasks.map((task) =>
          task.id === taskID
            ? { ...task, task: [...task.task, newTask] }
            : task
        )
      }
    })),
    assignTaskDelete: (projectID,taskID) =>
    set((state) => ({
      tasksState: {
        ...state.tasksState,
        tasks: state.tasksState.tasks.map((task) =>
          task.id === projectID
            ? { ...task, task: task.task.filter(t=>t.id!==taskID) }
            : task
        )
      }
    })),
    editAssignTask: (taskID,updateTask) =>
    set((state) => ({
      tasksState: {
        ...state.tasksState,
        tasks: state.tasksState.tasks.map((task) =>
          task.id === taskID
            ? { ...task, task: task.task.map((task) =>
              task.id === taskID ? { ...task, ...updateTask } : task
            ),
           }
            : task
        )
      }
    })),

  TaskUpdate: (updatedTask, position) =>
    set((state) => ({
      tasksState: {
        ...state.tasksState,
        tasks: [
          ...state.tasksState.tasks.filter((t) => t.id !== updatedTask.id),
          updatedTask,
        ],
      },
    })),

  setActiveTaskIndex: (taskIndex) =>
    set((state) => ({
      tasksState: {
        ...state.tasksState,
        taskIndex: taskIndex,
      },
    })),
}));
